# CodeWise Frontend

åŸºäº React 18 + TypeScript + Vite + Ant Design æ„å»ºçš„ç°ä»£åŒ–å‰ç«¯åº”ç”¨ï¼Œä¸º CodeWise æ™ºèƒ½ä»£ç åº“æ£€ç´¢ä¸é—®ç­”ç³»ç»Ÿæä¾›ç”¨æˆ·å‹å¥½çš„äº¤äº’ç•Œé¢ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **ç°ä»£æŠ€æœ¯æ ˆ**ï¼šReact 18 + TypeScript + Vite + Ant Design 5
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒç§»åŠ¨ç«¯ã€å¹³æ¿ç«¯ã€æ¡Œé¢ç«¯çš„å®Œç¾é€‚é…
- ğŸŒ™ **ä¸»é¢˜åˆ‡æ¢**ï¼šå†…ç½®æµ…è‰²/æ·±è‰²ä¸»é¢˜ï¼Œæ”¯æŒç³»ç»Ÿä¸»é¢˜è·Ÿéš
- ğŸ”„ **å®æ—¶æµå¼è¾“å‡º**ï¼šæ”¯æŒ Agent åˆ†æè¿‡ç¨‹çš„å®æ—¶æ˜¾ç¤º
- ğŸ“Š **æ•°æ®å¯è§†åŒ–**ï¼šD3.js é©±åŠ¨çš„è°ƒç”¨é“¾å¯è§†åŒ–å›¾è¡¨
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šå†å²è®°å½•å’Œè®¾ç½®çš„æŒä¹…åŒ–å­˜å‚¨
- ğŸ¨ **ä»£ç é«˜äº®**ï¼šé›†æˆ react-syntax-highlighter æ”¯æŒå¤šè¯­è¨€ä»£ç é«˜äº®
- ğŸ” **æ™ºèƒ½æœç´¢**ï¼šå†å²è®°å½•æœç´¢ã€è¿‡æ»¤å’Œåˆ†ç±»åŠŸèƒ½

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ logo.svg           # åº”ç”¨ Logo
â”‚   â””â”€â”€ vite.svg          # Vite å›¾æ ‡
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout/       # ä¸»å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ServiceStatus/ # æœåŠ¡çŠ¶æ€ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ AnalysisInput/ # åˆ†æè¾“å…¥ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AnalysisResult/ # åˆ†æç»“æœå±•ç¤º
â”‚   â”‚   â”œâ”€â”€ CallChainVisualization/ # è°ƒç”¨é“¾å¯è§†åŒ–
â”‚   â”‚   â””â”€â”€ ContextDisplay/ # ä¸Šä¸‹æ–‡æ˜¾ç¤ºç»„ä»¶
â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â””â”€â”€ useAnalysisHistory.ts # å†å²è®°å½•ç®¡ç†
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomePage/     # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ AnalysisPage/ # åˆ†æé¡µé¢
â”‚   â”‚   â”œâ”€â”€ HistoryPage/  # å†å²è®°å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ SettingsPage/ # è®¾ç½®é¡µé¢
â”‚   â”œâ”€â”€ services/         # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ api.ts        # API æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ store/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ themeStore.ts # ä¸»é¢˜çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ styles/           # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ responsive.css # å“åº”å¼æ ·å¼
â”‚   â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ App.tsx           # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â””â”€â”€ main.tsx          # åº”ç”¨å…¥å£
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts        # Vite é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0 æˆ– yarn >= 1.22.0

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# ä½¿ç”¨ npm
npm run dev

# æˆ–ä½¿ç”¨ yarn
yarn dev
```

åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# ä½¿ç”¨ npm
npm run build

# æˆ–ä½¿ç”¨ yarn
yarn build
```

æ„å»ºäº§ç‰©å°†è¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

### é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

```bash
# ä½¿ç”¨ npm
npm run preview

# æˆ–ä½¿ç”¨ yarn
yarn preview
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶æ¥é…ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# RAG æœåŠ¡åœ°å€
VITE_RAG_API_URL=http://localhost:8001

# Agent æœåŠ¡åœ°å€  
VITE_AGENT_API_URL=http://localhost:8002

# åº”ç”¨æ ‡é¢˜
VITE_APP_TITLE=CodeWise

# å¯ç”¨è°ƒè¯•æ¨¡å¼
VITE_DEBUG=false
```

### æœåŠ¡ç«¯é…ç½®

ç¡®ä¿ä»¥ä¸‹æœåŠ¡æ­£å¸¸è¿è¡Œï¼š

1. **RAG æœåŠ¡**ï¼šé»˜è®¤è¿è¡Œåœ¨ `http://localhost:8001`
2. **Agent æœåŠ¡**ï¼šé»˜è®¤è¿è¡Œåœ¨ `http://localhost:8002`

## ğŸ“± åŠŸèƒ½ç‰¹æ€§

### 1. æ™ºèƒ½åˆ†æ

- **å¤šç§åˆ†æç±»å‹**ï¼šå‡½æ•°åˆ†æã€ç»„ä»¶åˆ†æã€ä¾èµ–åˆ†æç­‰
- **å®æ—¶æµå¼è¾“å‡º**ï¼šåˆ†æè¿‡ç¨‹å®æ—¶å±•ç¤º
- **å‚æ•°é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰åˆ†æå‚æ•°
- **ç¤ºä¾‹æŸ¥è¯¢**ï¼šå†…ç½®å¸¸ç”¨æŸ¥è¯¢ç¤ºä¾‹

### 2. ç»“æœå±•ç¤º

- **Markdown æ¸²æŸ“**ï¼šæ”¯æŒå¯Œæ–‡æœ¬æ ¼å¼çš„åˆ†æç»“æœ
- **ä»£ç é«˜äº®**ï¼šå¤šè¯­è¨€ä»£ç è¯­æ³•é«˜äº®
- **è°ƒç”¨é“¾å¯è§†åŒ–**ï¼šD3.js é©±åŠ¨çš„äº¤äº’å¼å›¾è¡¨
- **ä¸Šä¸‹æ–‡æ˜¾ç¤º**ï¼šç»“æ„åŒ–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å±•ç¤º

### 3. å†å²è®°å½•

- **æœ¬åœ°å­˜å‚¨**ï¼šå†å²è®°å½•æœ¬åœ°æŒä¹…åŒ–
- **æœç´¢è¿‡æ»¤**ï¼šæ”¯æŒå…³é”®è¯æœç´¢å’Œç±»å‹è¿‡æ»¤
- **ç»Ÿè®¡åˆ†æ**ï¼šåˆ†ææˆåŠŸç‡å’Œä½¿ç”¨ç»Ÿè®¡
- **å¯¼å‡ºåŠŸèƒ½**ï¼šæ”¯æŒ JSON/CSV æ ¼å¼å¯¼å‡º

### 4. ç³»ç»Ÿè®¾ç½®

- **æœåŠ¡é…ç½®**ï¼šRAG å’Œ Agent æœåŠ¡åœ°å€é…ç½®
- **ç•Œé¢è®¾ç½®**ï¼šä¸»é¢˜ã€è¯­è¨€ã€åˆ†é¡µç­‰è®¾ç½®
- **é«˜çº§é€‰é¡¹**ï¼šè°ƒè¯•æ¨¡å¼ã€ç¼“å­˜æ§åˆ¶ç­‰
- **æ•°æ®ç®¡ç†**ï¼šå†å²è®°å½•æ¸…ç†å’Œå­˜å‚¨ç®¡ç†

## ğŸ¨ ä¸»é¢˜å®šåˆ¶

åº”ç”¨æ”¯æŒæµ…è‰²å’Œæ·±è‰²ä¸¤ç§ä¸»é¢˜ï¼Œå¹¶å¯ä»¥è·Ÿéšç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ã€‚

### è‡ªå®šä¹‰ä¸»é¢˜è‰²å½©

åœ¨ `src/App.tsx` ä¸­ä¿®æ”¹ `ConfigProvider` çš„ä¸»é¢˜é…ç½®ï¼š

```typescript
theme={{
  token: {
    colorPrimary: '#1890ff', // ä¸»è‰²è°ƒ
    borderRadius: 8,         // åœ†è§’å¤§å°
    // æ›´å¤šé…ç½®...
  }
}}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²

åº”ç”¨ä½¿ç”¨ React.lazy() å®ç°è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²ï¼š

```typescript
const AnalysisPage = lazy(() => import('@/pages/AnalysisPage'))
```

### å“åº”å¼è®¾è®¡

- é‡‡ç”¨ CSS Grid å’Œ Flexbox å¸ƒå±€
- é’ˆå¯¹ä¸åŒå±å¹•å°ºå¯¸ä¼˜åŒ–ç»„ä»¶æ˜¾ç¤º
- è§¦æ‘¸å‹å¥½çš„ç§»åŠ¨ç«¯äº¤äº’

### æ€§èƒ½ç›‘æ§

åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ç”¨ React DevTools è¿›è¡Œæ€§èƒ½åˆ†æã€‚

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ ESLint + Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–ï¼š

```bash
# æ£€æŸ¥ä»£ç 
npm run lint

# ä¿®å¤ä»£ç æ ¼å¼
npm run lint:fix
```

### ç»„ä»¶å¼€å‘

åˆ›å»ºæ–°ç»„ä»¶æ—¶éµå¾ªä»¥ä¸‹ç»“æ„ï¼š

```
ComponentName/
â”œâ”€â”€ index.tsx      # ç»„ä»¶ä¸»æ–‡ä»¶
â”œâ”€â”€ index.css      # ç»„ä»¶æ ·å¼
â””â”€â”€ types.ts       # ç±»å‹å®šä¹‰ï¼ˆå¯é€‰ï¼‰
```

### API é›†æˆ

æ‰€æœ‰ API è°ƒç”¨ç»Ÿä¸€åœ¨ `src/services/api.ts` ä¸­ç®¡ç†ï¼š

```typescript
export const agentApi = {
  analyze: (data: AnalysisRequest) => 
    request.post<AnalysisResponse>('/analyze', data),
  
  analyzeStream: (data: AnalysisRequest) =>
    fetch(`${AGENT_BASE_URL}/analyze/stream`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    })
}
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡è¿æ¥å¤±è´¥**
   - ç¡®ä¿ RAG å’Œ Agent æœåŠ¡æ­£å¸¸è¿è¡Œ
   - æ£€æŸ¥æœåŠ¡ç«¯å£æ˜¯å¦æ­£ç¡®
   - éªŒè¯ CORS è®¾ç½®

2. **æ ·å¼å¼‚å¸¸**
   - æ¸…ç†æµè§ˆå™¨ç¼“å­˜
   - æ£€æŸ¥ Ant Design ç‰ˆæœ¬å…¼å®¹æ€§
   - éªŒè¯ CSS å¯¼å…¥é¡ºåº

3. **æ„å»ºå¤±è´¥**
   - åˆ é™¤ `node_modules` é‡æ–°å®‰è£…ä¾èµ–
   - æ£€æŸ¥ TypeScript ç±»å‹é”™è¯¯
   - éªŒè¯ç¯å¢ƒå˜é‡é…ç½®

### è°ƒè¯•æŠ€å·§

1. å¼€å¯è°ƒè¯•æ¨¡å¼ï¼šè®¾ç½® `VITE_DEBUG=true`
2. ä½¿ç”¨ React DevTools æ£€æŸ¥ç»„ä»¶çŠ¶æ€
3. åœ¨ Network é¢æ¿æŸ¥çœ‹ API è¯·æ±‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/new-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add new feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/new-feature`
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [React](https://reactjs.org/) - ç”¨æˆ·ç•Œé¢åº“
- [Ant Design](https://ant.design/) - ä¼ä¸šçº§ UI è®¾è®¡è¯­è¨€
- [Vite](https://vitejs.dev/) - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- [TypeScript](https://www.typescriptlang.org/) - ç±»å‹å®‰å…¨çš„ JavaScript
- [D3.js](https://d3js.org/) - æ•°æ®é©±åŠ¨çš„æ–‡æ¡£æ“ä½œåº“
- [React Syntax Highlighter](https://github.com/react-syntax-highlighter/react-syntax-highlighter) - è¯­æ³•é«˜äº®ç»„ä»¶