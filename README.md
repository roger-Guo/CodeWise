# CodeWise: æ™ºèƒ½ä»£ç åº“æ£€ç´¢ä¸é—®ç­”Agent

CodeWise æ˜¯ä¸€ä¸ªåŸºäºæœ¬åœ°å¤§è¯­è¨€æ¨¡å‹å’Œä»£ç çŸ¥è¯†å›¾è°±çš„æ™ºèƒ½ä»£ç ç†è§£ä¸é—®ç­”ç³»ç»Ÿã€‚å®ƒé€šè¿‡æ·±åº¦è§£æä»£ç åº“ï¼Œæ„å»ºæ–‡ä»¶é—´çš„ä¾èµ–å…³ç³»å›¾è°±ï¼Œä¸ºå¼€å‘è€…æä¾›ç²¾å‡†ã€ä¸Šä¸‹æ–‡å®Œæ•´çš„ä»£ç æ£€ç´¢å’Œé—®ç­”ä½“éªŒã€‚

## ğŸš€ é¡¹ç›®æ„¿æ™¯

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è¶…è¶Šä¼ ç»ŸåŸºäºæ–‡æœ¬çš„æœç´¢ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤ŸçœŸæ­£â€œç†è§£â€ä»£ç åº“çš„AI Agentã€‚é€šè¿‡ç»“åˆ**ä»£ç çŸ¥è¯†å›¾è°±**å’Œ**LangGraph**ç­‰é«˜çº§æ¡†æ¶ï¼ŒCodeWiseèƒ½å¤Ÿï¼š

- **è¿½è¸ªå¤æ‚è°ƒç”¨é“¾**: ä»ä¸€ä¸ªå‡½æ•°å‡ºå‘ï¼Œå®Œæ•´åœ°è¿½è¸ªå…¶åœ¨æ•´ä¸ªé¡¹ç›®ä¸­çš„è°ƒç”¨è·¯å¾„ã€‚
- **ç†è§£è·¨æ–‡ä»¶é€»è¾‘**: å›ç­”æ¶‰åŠå¤šä¸ªæ–‡ä»¶åä½œæ‰èƒ½å®Œæˆçš„åŠŸèƒ½æ€§é—®é¢˜ã€‚
- **è¯„ä¼°å˜æ›´å½±å“**: åœ¨ä¿®æ”¹ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—å‰ï¼Œç²¾ç¡®è¯„ä¼°å…¶å¯¹æ•´ä¸ªä»£ç åº“çš„æ½œåœ¨å½±å“ã€‚

## æ ¸å¿ƒæ¨¡å—ï¼š`parser` ä»£ç çŸ¥è¯†å›¾è°±è§£æå™¨

ä¸ºäº†å®ç°ä¸Šè¿°ç›®æ ‡ï¼Œé¡¹ç›®çš„æ ¸å¿ƒæ˜¯ä½äº `parser/` ç›®å½•ä¸‹çš„ä»£ç è§£æå™¨ã€‚å®ƒå·²å‡çº§ä¸ºæ¨¡å—åŒ–è®¾è®¡ï¼Œèƒ½å¤Ÿè¾“å‡ºåŒ…å«ä¸°å¯Œä¸Šä¸‹æ–‡çš„ç»“æ„åŒ–çŸ¥è¯†èŠ‚ç‚¹ã€‚

### åŠŸèƒ½ç‰¹æ€§
- **åŒå‘ä¾èµ–å›¾è°±**: ç²¾ç¡®è§£æ`import`/`export`ï¼Œæ„å»º**æ­£å‘å¼•ç”¨**ï¼ˆæˆ‘ä¾èµ–è°ï¼‰å’Œ**åå‘å¼•ç”¨**ï¼ˆè°ä¾èµ–æˆ‘ï¼‰çš„åŒå‘ä¾èµ–å›¾ï¼Œæ˜¯å½±å“åˆ†æå’Œä»£ç æº¯æºçš„å…³é”®ã€‚
- **æ·±åº¦ä»£ç ç»“æ„åˆ†æ**: å°†æ–‡ä»¶è§£æ„ä¸ºåŒ…å«ç»„ä»¶ã€å‡½æ•°ã€ç±»çš„**ä¸€çº§å®šä¹‰åˆ—è¡¨**ï¼ŒåŒæ—¶é€šè¿‡**ä½œç”¨åŸŸè·¯å¾„**ä¿ç•™å…¶é€»è¾‘å±‚çº§å…³ç³»ã€‚
- **å…¨é¢çš„å…ƒæ•°æ®æå–**: ä¸ä»…æ˜¯ä»£ç ï¼Œè¿˜åŒ…æ‹¬ Git ç‰ˆæœ¬ã€åˆ†æ”¯ã€æœ€åä¿®æ”¹æ—¶é—´ç­‰ä¸°å¯Œçš„å…ƒæ•°æ®ã€‚
- **æ¨¡å—åŒ–JSONè¾“å‡º**: è¾“å‡ºç»“æ„æ¸…æ™°çš„æ¨¡å—åŒ–JSONï¼Œæ¯ä¸ªæ¨¡å—ï¼ˆå¦‚`fileMetadata`, `dependencyInfo`ï¼‰èŒè´£å•ä¸€ï¼Œä¾¿äºæ¶ˆè´¹ã€‚
- **React ç‰¹æ€§æ·±åº¦è§£æ**: æ·±åº¦åˆ†æç»„ä»¶çš„ Props, State, Hooksï¼Œä»¥åŠå†…éƒ¨å­ç»„ä»¶å®šä¹‰ã€‚

### æµ‹è¯•é¡¹ç›®æ”¯æŒ

- âœ… **æ”¯æŒ ant-design-pro ä½œä¸ºæµ‹è¯•é¡¹ç›®**
- ä½ å¯ä»¥ç›´æ¥å°† ant-design-pro ä½œä¸º parser çš„è¾“å…¥é¡¹ç›®ï¼Œæ‰¹é‡è§£æå…¶æ‰€æœ‰æºç æ–‡ä»¶ï¼ŒéªŒè¯ä¾èµ–å…³ç³»ã€ç»„ä»¶ç»“æ„ã€è·¨æ–‡ä»¶è°ƒç”¨é“¾ç­‰ã€‚
- è§£æç»“æœå¯ç”¨äºå¤§è§„æ¨¡çœŸå®é¡¹ç›®çš„ä»£ç çŸ¥è¯†å›¾è°±æ„å»ºä¸é—®ç­”ã€‚

### è¾“å‡ºèŠ‚ç‚¹ç¤ºä¾‹
æ¯ä¸ªæ–‡ä»¶è¢«è§£æä¸ºä¸€ä¸ªçŸ¥è¯†å›¾è°±èŠ‚ç‚¹ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š
```json
{
  "fileMetadata": {
    "filePath": "src/components/UserProfile.jsx",
    "version": "a1b2c3d"
  },
  "fileDefinitions": [
    {
      "name": "UserProfile",
      "definitionType": "component",
      "scopePath": null,
      "details": { "hooks": ["useState"], "props": [{ "name": "userId" }] }
    },
    {
      "name": "loadUser",
      "definitionType": "function",
      "scopePath": "UserProfile"
    }
  ],
  "dependencyInfo": {
    "forwardReferences": [
      { "function": "fetchFromApi", "source": "../api/user" }
    ],
    "backwardReferences": [
      { "referencedBy": "src/pages/HomePage.jsx" }
    ]
  }
}
```

## ğŸ¤– é«˜çº§åº”ç”¨ï¼šç»“åˆ LangGraph å®ç°å¤šæ–‡ä»¶è”åˆåˆ†æ

ç”Ÿæˆçš„ä»£ç çŸ¥è¯†å›¾è°±æ˜¯æ„å»ºé«˜çº§Agentçš„åŸºç¡€ã€‚æˆ‘ä»¬è®¡åˆ’ä½¿ç”¨ **LangGraph** æ¡†æ¶æ„å»ºä¸€ä¸ªå…·å¤‡å¾ªç¯å’Œæ¨ç†èƒ½åŠ›çš„Agentï¼Œå…¶å·¥ä½œæµå¦‚ä¸‹ï¼š

1.  **å¯åŠ¨ (Retrieve)**: æ ¹æ®ç”¨æˆ·é—®é¢˜ï¼Œå‘é‡æ£€ç´¢æ‰¾åˆ°æœ€ç›¸å…³çš„**å…¥å£æ–‡ä»¶**ã€‚
2.  **åˆ†æ (Analyze)**: è¯»å–æ–‡ä»¶èŠ‚ç‚¹çš„JSONæ•°æ®ã€‚åˆ©ç”¨ `dependencyInfo` ä¸­çš„**æ­£å‘å’Œåå‘å¼•ç”¨**æ¥æ‰©å±•åˆ†æèŒƒå›´ã€‚é€šè¿‡ `forwardReferences` æ‰¾åˆ°éœ€è¦ç»§ç»­è¿½è¸ªçš„æ–‡ä»¶ï¼Œé€šè¿‡ `backwardReferences` äº†è§£å½“å‰æ–‡ä»¶çš„è°ƒç”¨ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†ä¿¡æ¯èšåˆåˆ°å…¨å±€ä¸Šä¸‹æ–‡ä¸­ã€‚
3.  **è·¯ç”± (Router)**: æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ–°çš„ã€ç›¸å…³çš„ä¾èµ–éœ€è¦åˆ†æã€‚
    -   **æ˜¯**: å¾ªç¯å›åˆ°**åˆ†æ**èŠ‚ç‚¹ï¼Œå¤„ç†ä¸‹ä¸€ä¸ªä¾èµ–æ–‡ä»¶ã€‚
    -   **å¦**: è¿›å…¥**ç”Ÿæˆç­”æ¡ˆ**èŠ‚ç‚¹ã€‚
4.  **ç”Ÿæˆ (Generate)**: å°†åŒ…å«å®Œæ•´è°ƒç”¨é“¾å’Œå¤šæ–‡ä»¶ä»£ç çš„ä¸Šä¸‹æ–‡äº¤ç»™LLMï¼Œç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚

é€šè¿‡è¿™ä¸ªå·¥ä½œæµï¼ŒAgentèƒ½å¤Ÿåƒç»éªŒä¸°å¯Œçš„å¼€å‘è€…ä¸€æ ·ï¼Œåœ¨æ•´ä¸ªä»£ç åº“çš„ä¾èµ–å…³ç³»ä¸­ç©¿æ¢­ï¼Œä»è€ŒçœŸæ­£â€œç†è§£â€ä»£ç ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.13.5, FastAPI
- **å‰ç«¯**: React 18, Vite, Ant Design React, TypeScript
- **å¤§è¯­è¨€æ¨¡å‹**: deepseek-coder-v2
- **å‘é‡æ•°æ®åº“**: chroma_db
- **åµŒå…¥æ¨¡å‹**: BAAI/bge-m3
- **RAG æ¡†æ¶**: LlamaIndex, **LangGraph (è§„åˆ’ä¸­)**
- **ä»£ç è§£æ**: `@babel/parser`, `@babel/traverse`, `@babel/types`, `@babel/preset-react`
- **pythonåŒ…ç®¡ç†å™¨**: miniconda
- **minicondaè™šæ‹Ÿç¯å¢ƒ**: codewise
- **nodejsç‰ˆæœ¬**: 20.19.3

## ğŸ“ é¡¹ç›®ç»“æ„

```
CodeWise/
â”œâ”€â”€ frontend/          # React 18 å‰ç«¯ + vite + Ant Design React
â”œâ”€â”€ parser/            # ä»£ç çŸ¥è¯†å›¾è°±è§£æå™¨
â”œâ”€â”€ backend/           # Python FastAPI åç«¯
â”œâ”€â”€ models/            # æœ¬åœ°åµŒå…¥æ¨¡å‹å­˜å‚¨ 
â”œâ”€â”€ db/                # å‘é‡æ•°æ®åº“ chroma_db
â”œâ”€â”€ data/              # æºç åŠå¤„ç†åçš„JSONæ–‡ä»¶
â”œâ”€â”€ scripts/           # éƒ¨ç½²è„šæœ¬
â””â”€â”€ ant-design-pro/    # ï¼ˆæ¨èï¼‰çœŸå®å¤§å‹Reacté¡¹ç›®ï¼Œä½œä¸ºæµ‹è¯•ç”¨ä¾‹
```

> æ¨èå°† [ant-design-pro](https://github.com/ant-design/ant-design-pro) ä½œä¸ºæµ‹è¯•é¡¹ç›®ï¼Œä½“éªŒå¤§è§„æ¨¡çœŸå®é¡¹ç›®çš„ä¾èµ–è§£æä¸çŸ¥è¯†å›¾è°±æ„å»ºèƒ½åŠ›ã€‚